(this["webpackJsonpecommerce-frontend"]=this["webpackJsonpecommerce-frontend"]||[]).push([[0],{26:function(e,t,a){},42:function(e,t,a){e.exports=a(83)},47:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(22),s=a.n(c),l=(a(47),a(6)),o=a(7),u=a(2),i=a.n(u),m=a(4),d=a(9),p=a(1),f=a(3),b=(a(26),function(e){return n.a.createElement("div",null,n.a.createElement("div",{className:"jumbotron"},n.a.createElement("h2",null,e.title),n.a.createElement("p",{className:"lead"},e.description)),n.a.createElement("div",{className:e.className},e.children))}),g=a(5),E=a.n(g),v=function(e){var t=Object(r.useState)({name:"",email:"",password:"",error:!1,errorMessage:"",success:!1,loading:!1}),a=Object(f.a)(t,2),c=a[0],s=a[1],o=function(e){return function(t){s(Object(p.a)(Object(p.a)({},c),{},Object(d.a)({error:!1},e,t.target.value)))}},u=c.name,g=c.email,v=c.password,h=c.success,N=c.error,O=c.errorMessage,j=c.loading,y=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s(Object(p.a)(Object(p.a)({},c),{},{error:!1,errorMessage:"",success:!1,loading:!0})),e.prev=2,e.next=5,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/auth/signup"),method:"POST",data:{name:u,email:g,password:v}});case 5:"success"===e.sent.data.status&&s(Object(p.a)(Object(p.a)({},c),{},{name:"",email:"",password:"",error:!1,errorMessage:"",success:!0,loading:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s(Object(p.a)(Object(p.a)({},c),{},{error:!0,errorMessage:e.t0.response.data.message,success:!1,loading:!1}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(b,{title:"Signup ",className:"container col-md-8 offset-md-2",description:"signup to Node React E-commerce App"},function(){if(j&&!N&&!h)return n.a.createElement("div",{className:"alert alert-info"},"Waiting ...")}(),n.a.createElement("div",{className:"alert alert-success",style:{display:h?"":"none"}},"new Account was created plus try to ",n.a.createElement(l.b,{to:"/login"},"login")),n.a.createElement("div",{className:"alert alert-danger",style:{display:N?"":"none"}},O),n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Name"),n.a.createElement("input",{onChange:o("name"),type:"text",className:"form-control",value:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Email"),n.a.createElement("input",{onChange:o("email"),type:"email",className:"form-control",value:g})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Password"),n.a.createElement("input",{onChange:o("password"),type:"password",className:"form-control",value:v})),n.a.createElement("button",{onClick:y,className:"btn btn-primary"},"Signup")))},h=function(e){var t=Object(r.useState)({email:"",password:"",error:!1,loading:!1,redirectToReferrer:!1,errorMessage:"",success:!1}),a=Object(f.a)(t,2),c=a[0],s=a[1],l=c.email,u=c.password,g=c.loading,v=c.error,h=c.errorMessage,N=c.success,O=c.redirectToReferrer,j=function(e){return function(t){s(Object(p.a)(Object(p.a)({},c),{},Object(d.a)({error:!1},e,t.target.value)))}},y=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s(Object(p.a)(Object(p.a)({},c),{},{error:!1,errorMessage:"",loading:!0,redirectToReferrer:!1,success:!1})),e.prev=2,e.next=5,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/auth/login"),method:"POST",data:{email:l,password:u}});case 5:"succes"===(a=e.sent).data.status&&(void 0!==typeof window&&(localStorage.setItem("jwt",a.data.token),localStorage.setItem("data",JSON.stringify(a.data.user))),s(Object(p.a)(Object(p.a)({},c),{},{error:!1,errorMessage:!1,success:!0,loading:!1,redirectToReferrer:!0}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s(Object(p.a)(Object(p.a)({},c),{},{error:!0,errorMessage:e.t0.response.data.message,success:!1,loading:!1,redirectToReferrer:!1}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(b,{title:"Login ",className:"container col-md-8 offset-md-2",description:"signup to Node React E-commerce App"},g&&n.a.createElement("div",{className:"alert alert-info"},n.a.createElement("h2",null,"loading ...")),n.a.createElement("div",{className:"alert alert-danger",style:{display:v?"":"none"}},h),n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Email"),n.a.createElement("input",{onChange:j("email"),type:"email",className:"form-control",value:l})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Password"),n.a.createElement("input",{onChange:j("password"),type:"password",className:"form-control",value:u})),n.a.createElement("button",{onClick:y,className:"btn btn-primary"},"Login")),function(){var e=JSON.parse(localStorage.getItem("data"));return N&&O?"admin"===e.role?n.a.createElement(o.a,{to:"/admin/dashboard"}):n.a.createElement(o.a,{to:"/user/dashboard"}):e?n.a.createElement(o.a,{to:"/"}):void 0}())},N=function(e){return n.a.createElement("div",{className:"product-img",style:{height:"200px",width:"200px"}},n.a.createElement("img",{src:"".concat("http://127.0.0.1:8000/api/v1","/product/photo/").concat(e.item._id),alt:e.item.name,className:"mb-3 text-center",style:{objectFit:"cover",maxWidth:"2OOpx",maxHeight:"200px"}}))},O=a(39),j=a.n(O),y=function(e){var t=Object(r.useState)(!1),a=Object(f.a)(t,2),c=a[0],s=a[1],u=Object(r.useState)(e.product.count),i=Object(f.a)(u,2),m=i[0],d=i[1],b=function(e){return function(t){d(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map((function(r,n){r._id===e&&(a[n].count=t)})),localStorage.setItem("cart",JSON.stringify(a)))}(e,t.target.value)}},g=function(){!function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(Object(p.a)(Object(p.a)({},e),{},{count:1})),a=Array.from(new Set(a.map((function(e){return e._id})))).map((function(e){return a.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(a)),t())}(e.product,(function(){s(!0)}))};return n.a.createElement("div",{className:"card"},n.a.createElement("div",{className:"card-header name text-center"},e.product.name),n.a.createElement("div",{className:"card-body"},function(e){if(e)return n.a.createElement(o.a,{to:"/cart"})}(c),n.a.createElement(N,{item:e.product}),n.a.createElement("p",{className:"lead mt-2 text-center font-weight-bold"},e.product.description.substring(0,100)),n.a.createElement("p",{className:"bg-success text-warning"},"Price : ",e.product.price," $"," "),n.a.createElement("p",{className:"bg-success text-warning"},"Category : ",e.product.category&&e.product.category.name),n.a.createElement("p",{className:"bg-success text-warning font-italic"},"Added ",j()(e.product.createdAt).fromNow()),e.product.quantity>0?n.a.createElement("span",{className:"badge badge-primary badge-pill"},"In Stock"):n.a.createElement("span",{className:"badge badge-primary badge-pill"}," out of stock"),n.a.createElement("br",null),n.a.createElement(l.b,{to:"/product/".concat(e.product._id)},!e.showViewProductButton&&n.a.createElement("button",{className:"btn btn-outline-primary mt-2 mb-2 mr-2"},"View Product")),!e.showAddCartButton&&n.a.createElement("button",{onClick:g,className:"btn btn-outline-success mt-2 mb-2"},"Add to card"),e.cartUpdate&&n.a.createElement("div",{className:"input-group mb-3"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("span",{className:"input-group-text"},"Adjust Quantity")),n.a.createElement("input",{type:"number",onChange:b(e.product._id),className:"form-control",value:m})),function(t){return t&&n.a.createElement("button",{onClick:function(){return function(e){var t=[];return"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(a,r){a._id===e&&t.splice(r,1)})),localStorage.setItem("cart",JSON.stringify(t))),t}(e.product._id)},className:"btn btn-outline-danger mt-2 mb-2"},"remove product")}(e.showRemoveProduct)))},w=a(40),x=a.n(w),S=function(e){var t=Object(r.useState)({categories:[],category:"",search:"",results:[],searched:!1}),a=Object(f.a)(t,2),c=a[0],s=a[1],l=c.categories,o=c.category,u=c.search,b=c.results,g=c.searched,v=Object(r.useState)(""),h=Object(f.a)(v,2),N=(h[0],h[1]),O=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/category/all")});case 3:"success"===(t=e.sent).data.status&&s(Object(p.a)(Object(p.a)({},c),{},{categories:t.data.category})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j=function(e){return function(t){var a;s(Object(p.a)(Object(p.a)({},c),{},(a={},Object(d.a)(a,e,t.target.value),Object(d.a)(a,"searched",!1),a)))}},w=function(e){e.preventDefault(),S()},S=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u||!o){e.next=11;break}return t=x.a.stringify({search:u,category:o}),e.prev=2,e.next=5,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/search?").concat(t)});case 5:"success"===(a=e.sent).data.status&&s(Object(p.a)(Object(p.a)({},c),{},{results:a.data.list,searched:!0})),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),k=function(e,t){return e&&t.length>0?"Found ".concat(t.length," product"):e&&t.length<1?" No Product Found":void 0};return Object(r.useEffect)((function(){O()}),[]),n.a.createElement("div",null,n.a.createElement("div",{className:"container"},n.a.createElement("form",{onSubmit:w},n.a.createElement("span",{className:"input-group-text"},n.a.createElement("div",{className:"input-group input-group-lg"},n.a.createElement("div",{className:"input-group-prepent"},n.a.createElement("select",{className:"btn mr-2 ",onChange:j("category")},n.a.createElement("option",{value:"All"},"ALL"),l.map((function(e,t){return n.a.createElement("option",{key:e._id,value:e._id},e.name)})))),n.a.createElement("input",{type:"search",className:"form-control",onChange:j("search"),placeholder:"Search by name"})),n.a.createElement("div",{className:"btn input-group-append",style:{border:"none"}},n.a.createElement("button",{className:"input-group-text"},"Search"))))),n.a.createElement("div",{className:"container-fluid mb-3"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.a.createElement("div",null,n.a.createElement("h2",{className:"mt-4 mb-4"},k(g,e)),n.a.createElement("div",{className:"row"},e.map((function(e,t){return n.a.createElement(y,{key:e._id,product:e})}))))}(b)))},k=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),c=a[0],s=a[1],l=Object(r.useState)([]),o=Object(f.a)(l,2),u=o[0],d=o[1],p=Object(r.useState)(!1),g=Object(f.a)(p,2),v=g[0],h=g[1],N=Object(r.useState)(""),O=Object(f.a)(N,2),j=O[0],w=O[1],x=Object(r.useState)(!1),k=Object(f.a)(x,2),P=k[0],C=k[1],_=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/list?sortBy=sold&order=desc&limit=100")});case 3:"success"===(t=e.sent).data.status&&(s(t.data.listProduct),C(!1)),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),h(!0),w(e.t0.response.data.message),C(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/list?sortBy=createdAt&order=desc&limit=100")});case 4:"success"===(t=e.sent).data.status&&d(t.data.listProduct),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),h(!0),w(e.t0.response.data.message),C(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){I(),_()}),[]),n.a.createElement(b,{title:"Home Page",className:"container-fluid",description:"Web Technologies E-commerce App"},n.a.createElement(S,null),function(){if(P&&!v)return n.a.createElement("h2",{className:"alert alert-primary"},"Loading ...")}(),function(){if(!P&&v)return n.a.createElement("h2",{className:"alert alert-danger"},j)}(),!P&&!v&&n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",{className:"mb-4"},"Best Sellers"),n.a.createElement("div",{className:"row"},u.map((function(e,t){return n.a.createElement("div",{key:e._id,className:"col-md-4 col-sm-12 mb-3"},n.a.createElement(y,{product:e}))}))),n.a.createElement("h2",{className:"mb-4"},"Best Arrival"),n.a.createElement("div",{className:"row"},c.map((function(e,t){return n.a.createElement("div",{key:e._id,className:"col-md-4 col-sm-12 mb-3"},n.a.createElement(y,{product:e}))})))))},P=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/auth/logout")});case 3:"success"===e.sent.data.status&&(localStorage.setItem("jwt",null),localStorage.clear(),t()),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){return"undefined"!==typeof window&&(!(!localStorage.getItem("jwt")||!localStorage.getItem("data"))&&{jwt:localStorage.getItem("jwt"),userData:JSON.parse(localStorage.getItem("data"))})},_=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},I=Object(o.i)((function(e){var t=localStorage.getItem("jwt"),a=JSON.parse(localStorage.getItem("data")),r=Object(o.g)();return n.a.createElement("div",null,n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary "},n.a.createElement("ul",{className:"navbar-nav  mr-auto"},n.a.createElement("li",{className:"nav-item mr-4 "},n.a.createElement(l.b,{className:"nav-link",style:_(e.history,"/"),to:"/"},"Home"," ")," ")," ",n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(l.b,{className:"nav-link",style:_(e.history,"/shop"),to:"/shop"},"Shop"," ")," ")," ",n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(l.b,{className:"nav-link",style:_(e.history,"/cart"),to:"/cart"},"Cart"," ",n.a.createElement("sup",null,n.a.createElement("small",{className:"cart-badge"}," ","undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0," ")," ")," ")," ")," ",t&&"user"===a.role&&n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(l.b,{className:"nav-link",style:_(r,"/dashboard"),to:"/user/dashboard"},"Dashboard"," ")," ")," ",t&&"admin"===a.role&&n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(l.b,{className:"nav-link",style:_(r,"/dashboard"),to:"/admin/dashboard"},"Dashboard"," ")," ")," ")," ",n.a.createElement("ul",{className:"navbar-nav  ml-auto"},!t&&n.a.createElement("li",{className:"nav-item mr-4"},n.a.createElement(l.b,{className:"nav-link",style:_(e.history,"/signup"),to:"/signup"},"Signup"," ")," "),!t&&n.a.createElement("li",{className:"nav-item "},n.a.createElement(l.b,{className:"nav-link",style:_(e.history,"/login"),to:"/login"},"Login"," ")," ")," ",t&&n.a.createElement("li",{className:"nav-item "},n.a.createElement(l.b,{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},to:"/login",onClick:function(){return P((function(){r.push("/")}))}},"Logout"," ")," "))," "))})),T=function(e){var t=JSON.parse(localStorage.getItem("data")),a=t._id,c=t.name,s=t.email,o=t.role,u=localStorage.getItem("jwt"),d=Object(r.useState)([]),p=Object(f.a)(d,2),g=p[0],v=p[1],h=Object(r.useState)(!1),N=Object(f.a)(h,2),O=N[0],j=N[1],y=Object(r.useState)(""),w=Object(f.a)(y,2),x=w[0],S=w[1],k=Object(r.useState)(!1),P=Object(f.a)(k,2),C=P[0],_=P[1],I=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/user/orders/by/").concat(a),headers:{Authorization:"Bearer "+u}});case 4:"success"===(t=e.sent).data.status&&(v(t.data.listOfOrders),_(!1),S(""),j(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),j(!0),S(e.t0.response.data.message),_(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){I()}),[]);return n.a.createElement(b,{title:"User Dashbord",description:"Hi ".concat(c),className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-3"},n.a.createElement("div",{className:"card"},n.a.createElement("h4",{className:"card-header"},"User Links"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},n.a.createElement(l.b,{className:"nav-link",to:"/cart"},"My Cart")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement(l.b,{className:"nav-link",to:"/profile/".concat(a)},"Update Profile"))))),n.a.createElement("div",{className:"col-9"},function(){if(O&&!C)return n.a.createElement("h2",{className:"alert alert-danger"},x)}(),n.a.createElement("div",{className:"card mb-5"},n.a.createElement("h3",{className:"card-header"},"User Information"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},c),n.a.createElement("li",{className:"list-group-item"},s),n.a.createElement("li",{className:"list-group-item"},o))),n.a.createElement("div",{className:"card mb-5"},n.a.createElement("h3",{className:"card-header"},"purchase history"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},function(){if(!C&&!O&&0===g.length)return n.a.createElement("h2",{className:"alert alert-info"},"you have no orders")}(),g&&g.length>0&&g.map((function(e,t){return n.a.createElement("div",{key:e._id},e.products.map((function(e,t){return n.a.createElement("div",{key:e._id},n.a.createElement("h6",{className:"text-info"},"product Name : ",e.name),n.a.createElement("h6",{className:"text-info"},"product price : ",e.price," $"),n.a.createElement("h6",{className:"text-info"},"count : ",e.count))})),n.a.createElement("h6",{className:"text-info"},"amount : ",e.amount," $ "),n.a.createElement("h6",{className:"text-info"},"created At : ",e.createdAt," "),n.a.createElement("hr",null))}))," ",n.a.createElement("hr",null)))))))},D=function(e){var t=JSON.parse(localStorage.getItem("data")),a=(t._id,t.name),r=t.email,c=t.role;return n.a.createElement(b,{title:"User Dashbord",description:"Hi ".concat(a),className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-3"},n.a.createElement("div",{className:"card"},n.a.createElement("h4",{className:"card-header"},"Admin Links"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},n.a.createElement(l.b,{className:"nav-link",to:"/create/category"},"Create Category")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement(l.b,{className:"nav-link",to:"/create/product"},"Create Product")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement(l.b,{className:"nav-link",to:"/admin/orders"},"list of orders")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement(l.b,{className:"nav-link",to:"/admin/products"},"Manage Products"))))),n.a.createElement("div",{className:"col-9"},n.a.createElement("div",{className:"card mb-5"},n.a.createElement("h3",{className:"card-header"},"User Information"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},a),n.a.createElement("li",{className:"list-group-item"},r),n.a.createElement("li",{className:"list-group-item"},"admin"===c?"admin":"Registered User"))))))},M=a(19),A=function(e){var t=e.component,a=Object(M.a)(e,["component"]);return n.a.createElement(o.b,Object.assign({},a,{render:function(e){return C()?n.a.createElement(t,e):n.a.createElement(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},B=function(e){var t=e.component,a=Object(M.a)(e,["component"]),r=JSON.parse(localStorage.getItem("data")).role,c=localStorage.getItem("jwt");return n.a.createElement(o.b,Object.assign({},a,{render:function(e){return c&&"admin"===r?n.a.createElement(t,e):n.a.createElement(o.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},U=function(e){var t=Object(r.useState)(""),a=Object(f.a)(t,2),c=a[0],s=a[1],l=Object(r.useState)(!1),o=Object(f.a)(l,2),u=o[0],d=o[1],p=Object(r.useState)(""),g=Object(f.a)(p,2),v=g[0],h=g[1],N=Object(r.useState)(!1),O=Object(f.a)(N,2),j=O[0],y=O[1],w=Object(r.useState)(!1),x=Object(f.a)(w,2),S=x[0],k=x[1],P=C(),_=P.jwt,I=P.userData,T=function(e){d(!1),h(""),s(e.target.value)},D=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),d(!1),y(!1),e.prev=3,k(!0),e.next=7,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/category/create/").concat(I.userId),method:"POST",data:{name:c},headers:{Authorization:"Bearer "+_}});case 7:"success"===e.sent.data.status&&(d(!1),y(!0),k(!1)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),d(!0),h(e.t0.response.data.message),k(!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return n.a.createElement(b,{title:"Add new category",description:"Hi ".concat(I.name," ready to add a new category"),className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-8 offset-md-2"},function(){if(S&&!u&&!j)return n.a.createElement("h2",{className:"bg-info d-block mb-4 p-2"},"Waiting ....")}(),function(){if(j)return n.a.createElement("h3",{className:"bg-success d-block mb-4 p-2"},c," is created");setTimeout((function(){y(!1)}),5e3)}(),function(){if(u)return n.a.createElement("h3",{className:"bg-danger d-block mb-4 p-2"},v," ")}(),n.a.createElement("form",{onSubmit:D},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Name"),n.a.createElement("input",{type:"text",className:"form-control",onChange:T,value:c,autoFocus:!0,required:!0})),n.a.createElement("button",{className:"btn btn-outline-primary "},"Create Category")))))},J=function(e){var t=Object(r.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,errorMessage:"",cretedProduct:"",redirectTo:!1,formData:null}),a=Object(f.a)(t,2),c=a[0],s=a[1],l=c.name,u=c.description,g=c.price,v=c.categories,h=(c.category,c.shipping,c.quantity),N=c.errorMessage,O=c.loading,j=c.error,y=c.createdProduct,w=c.redirectTo,x=c.formData,S=C(),k=S.jwt,P=S.userData,_=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;s(Object(p.a)(Object(p.a)({},c),{},Object(d.a)({},e,a))),x.set(e,a)}},I=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/category/all")});case 3:"success"===(t=e.sent).data.status&&s(Object(p.a)(Object(p.a)({},c),{},{categories:t.data.category,formData:new FormData})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s(Object(p.a)(Object(p.a)({},c),{},{error:!1,errorMessage:e.t0.response.data.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s(Object(p.a)(Object(p.a)({},c),{},Object(d.a)({loading:!0,error:!1,errorMessage:""},"loading",!0))),e.prev=2,e.next=5,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/create/").concat(P._id),method:"POST",headers:{Authorization:"Bearer "+k},data:x});case 5:"success"===(a=e.sent).data.status&&s(Object(p.a)(Object(p.a)({},c),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:a.data.newProduct.name,formData:null,error:!1,errorMessage:"",redirectTo:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s(Object(p.a)(Object(p.a)({},c),{},{loading:!1,errorMessage:e.t0.response.data.message,error:!0}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){I()}),[]);return n.a.createElement(b,{title:"Add new Product",description:"Hi ".concat(P.name," ready to add a new Product"),className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-8 offset-md-2"},O&&n.a.createElement("div",{className:"alert alert-info"},n.a.createElement("h2",null,"Loading ...")),n.a.createElement("div",{className:"alert alert-success",style:{display:y?"":"none"}},n.a.createElement("h2",null,"".concat(y," is created"))),n.a.createElement("div",{className:"alert alert-danger",style:{display:j?"":"none"}},N),n.a.createElement("form",{className:"mb-3",onSubmit:T},n.a.createElement("h4",null,"Post Photo"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"btn btn-outline-secondary"},n.a.createElement("input",{onChange:_("photo"),type:"file",name:"photo",accept:"image/*"}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Name"),n.a.createElement("input",{onChange:_("name"),type:"text",className:"form-control",value:l})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Description"),n.a.createElement("textarea",{onChange:_("description"),className:"form-control",value:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Price"),n.a.createElement("input",{onChange:_("price"),type:"number",className:"form-control",value:g})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Category"),n.a.createElement("select",{onChange:_("category"),className:"form-control"},n.a.createElement("option",null," please Select"),v&&v.map((function(e,t){return n.a.createElement("option",{key:e._id,value:e._id},e.name)})))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Quantity"),n.a.createElement("input",{onChange:_("quantity"),type:"number",className:"form-control",value:h})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Shipping"),n.a.createElement("select",{onChange:_("shipping"),type:"text",className:"form-control"},n.a.createElement("option",null," please Select"),n.a.createElement("option",{value:!1},"No"),n.a.createElement("option",{value:!0},"Yes"))),n.a.createElement("button",{className:"btn btn-outline-primary"},"Create Product")),function(){if(w&&!O&&!j)return n.a.createElement(o.a,{to:"/admin/products"})}())))},L=function(e){var t=localStorage.getItem("data"),a=localStorage.getItem("jwt"),c=Object(r.useState)([]),s=Object(f.a)(c,2),l=s[0],o=s[1],u=Object(r.useState)([]),d=Object(f.a)(u,2),p=d[0],g=d[1],v=function(){var e=Object(m.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/order/list/").concat(t._id),headers:{authorization:"Bearer "+a}});case 3:"success"===(r=e.sent).data.status&&o(r.data.list),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(m.a)(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/order/status-values/").concat(t._id),headers:{authorization:"Bearer "+a}});case 3:"success"===(r=e.sent).data.status&&g(r.data.result),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){v(),h()}),[]);var N=function(e,t){return n.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},n.a.createElement("div",{className:"input-group-prepend"},n.a.createElement("div",{className:"input-group-text"},e),n.a.createElement("input",{type:"text",value:t,className:"form-control",readOnly:!0})))},O=function(){var e=Object(m.a)(i.a.mark((function e(r,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/order/update-order/").concat(n,"/").concat(t._id),method:"PUT",headers:{authorization:"Bearer "+a},data:{status:r.target.value}});case 3:"success"===e.sent.data.status&&v(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}();return n.a.createElement(b,{title:"Orders",descripition:"you can manage all orders here"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8 offset-md-2"},l.length>0?n.a.createElement("h1",{className:"text-danger display-2"},"TotalOrders:",l.length):n.a.createElement("h1",{className:"text-danger"}," no Orders"),l.map((function(e,t){return n.a.createElement("div",{className:"mt-5",key:e._id,style:{borderBottom:"5px solid indigo"}},n.a.createElement("h2",{className:"mb-5"},n.a.createElement("span",{className:"bg-primary"},"Order ID :",e._id)),n.a.createElement("ul",{className:"list-group mb-2"},n.a.createElement("li",{className:"list-group-item"},function(e){return n.a.createElement("div",{className:"fom-group"},n.a.createElement("h3",{className:"mark mb-4"},"Status :",e.status),n.a.createElement("select",{className:"form-control",onChange:function(t){return O(t,e._id)}},n.a.createElement("option",null,"Update Status"),p.map((function(e,t){return n.a.createElement("option",{key:e,value:e},e)}))))}(e)),n.a.createElement("li",{className:"list-group-item"},"Transaction ID : "),n.a.createElement("li",{className:"list-group-item"},"Amount :",e.amount),n.a.createElement("li",{className:"list-group-item"},"Orderd By :",e.user.name),n.a.createElement("li",{className:"list-group-item"},"Order On :",e.createdAt),n.a.createElement("li",{className:"list-group-item"},"Delivery address: ",e.address)),n.a.createElement("h3",{className:"mt-4 mb-4 font-italic"},"Total products in the order : ",e.products.length),e.products.map((function(e,t){return n.a.createElement("div",{className:"mb-4",key:e._id,style:{padding:"20px",border:"1px solid indigo"}},N("Product name",e.name),N("Product price",e.price),N("Product total",e.count),N("Product ID",e._id))})))})))))},z=function(e){var t=Object(r.useState)({name:"",email:"",currentPassword:"",newPassword:"",errorMessage:"",error:!1,loading:!1,success:!1}),a=Object(f.a)(t,2),c=a[0],s=a[1],l=c.name,u=c.currentPassword,g=c.email,v=c.error,h=c.success,N=c.errorMessage,O=c.loading,j=c.newPassword,y=localStorage.getItem("jwt"),w=Object(o.h)(),x=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(p.a)(Object(p.a)({},c),{},{loading:!0})),e.prev=1,e.next=4,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/user/").concat(w.userId),headers:{Authorization:"Bearer "+y}});case 4:"success"===(t=e.sent).data.status&&s(Object(p.a)(Object(p.a)({},c),{},{name:t.data.user.name,email:t.data.user.email,loading:!1})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s(Object(p.a)(Object(p.a)({},c),{},{errorMessage:e.t0.response.data.message,error:!0,loading:!1,success:!1}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(m.a)(i.a.mark((function e(t,a,r){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(p.a)(Object(p.a)({},c),{},{loading:!0,success:!1,error:!1,errorMessage:""})),e.prev=1,e.next=4,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/user/update/").concat(w.userId),method:"PUT",headers:{Authorization:"Bearer "+y},data:{name:t,currentPassword:u,newPassword:j,email:a}});case 4:"success"===(n=e.sent).data.status&&(s(Object(p.a)(Object(p.a)({},c),{},{name:n.data.updatedUser.name,email:n.data.updatedUser.email,success:!0,loading:!1})),localStorage.setItem("data",JSON.stringify(n.data.updatedUser))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s(Object(p.a)(Object(p.a)({},c),{},{errorMessage:e.t0.response.data.message,loading:!1,error:!0,success:!1}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a,r){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){x()}),[]);var k=function(e){return function(t){var a;s(Object(p.a)(Object(p.a)({},c),{},(a={},Object(d.a)(a,e,t.target.value),Object(d.a)(a,"error",""),a)))}},P=function(e){e.preventDefault(),S(l,g,u,j)};return n.a.createElement(b,{title:"Profile",description:"Update Your Profile",className:"container-fluid"},n.a.createElement("h2",null,"Profile "),function(){if(v&&!O&&!h)return n.a.createElement("div",{className:"alert alert-danger"},N)}(),function(){if(!v&&!O&&h)return n.a.createElement("div",{className:"alert alert-success"},"your profile has been updated successfully")}(),function(){if(O&&!v&&!h)return n.a.createElement("div",{className:"alert alert-info"},"Loading ...")}(),function(e,t,a){return n.a.createElement("form",null,n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Name"),n.a.createElement("input",{type:"text",onChange:k("name"),className:"form-control",value:e})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Email"),n.a.createElement("input",{type:"text",onChange:k("email"),className:"form-control",value:t})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Current password"),n.a.createElement("input",{type:"password",onChange:k("currentPassword"),className:"form-control",value:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"New password"),n.a.createElement("input",{type:"password",onChange:k("newPassword"),className:"form-control",value:j})),n.a.createElement("button",{onClick:P,className:"btn btn-primary btn-block mb-4"},"Update"))}(l,g,0),function(e){if(!0===e)return n.a.createElement(o.a,{to:"/cart"})}(h))},q=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),c=a[0],s=a[1],o=Object(r.useState)(!1),u=Object(f.a)(o,2),d=u[0],p=u[1],g=Object(r.useState)(""),v=Object(f.a)(g,2),h=v[0],N=v[1],O=Object(r.useState)(!1),j=Object(f.a)(O,2),y=j[0],w=j[1],x=Object(r.useState)(!1),S=Object(f.a)(x,2),k=S[0],P=S[1],C=Object(r.useState)(!1),_=Object(f.a)(C,2),I=(_[0],_[1]),T=localStorage.getItem("jwt"),D=JSON.parse(localStorage.getItem("data")),M=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/list"),method:"GET"});case 4:"success"===(t=e.sent).data.status&&(s(t.data.listProduct),w(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),p(!0),w(!1),N(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/").concat(t,"/").concat(D._id),method:"DELETE",headers:{Authorization:"Bearer "+T}});case 4:"success"===e.sent.data.status&&(P(!0),I(!0),w(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),w(!1),p(!0),N(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){M()}),[k]);return n.a.createElement(b,{title:"User Dashbord",description:"Manage your products",className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("h2",{className:"text-center"},"Total : ",c.length," product"),n.a.createElement("hr",null),n.a.createElement("ul",{className:"list-group"},function(){if(!d&&y)return n.a.createElement("h2",{className:"alert alert-info"},"Loading....")}(),function(){if(d&&!y)return n.a.createElement("h2",{className:"alert alert-danger"},h)}(),void(!d&&k&&setTimeout((function(){return n.a.createElement("h2",{className:"alert alert-success"},"deleted successfully")}),4e3)),!d&&!y&&c.map((function(e,t){return n.a.createElement("li",{key:e._id,className:"list-group-item d-flex justify-content-between align-items-center"},n.a.createElement("div",{className:"row",style:{width:"100%"}},n.a.createElement("div",{className:"col-4"},n.a.createElement("strong",null,e.name)),n.a.createElement("div",{className:"col-4  mr-auto"},n.a.createElement(l.b,{to:"/admin/product/update/".concat(e._id)},n.a.createElement("span",{className:"badge badge-warning badge-pill ml-2 mr-2 p-2 d-inline-block"},"Update")," ")),n.a.createElement("div",{className:"col-4 mr-auto"},n.a.createElement("span",{onClick:function(){return A(e._id)},className:"badge badge-danger badge-pill ml-2 mr-2 p-2 d-inline-block",style:{cursor:"pointer"}},"delete"," "))))}))))))},F=function(e){var t=Object(o.h)().productId,a=Object(r.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,errorMessage:"",cretedProduct:"",redirectToProfile:!1,formData:null}),c=Object(f.a)(a,2),s=c[0],l=c[1],u=s.name,g=s.description,v=s.price,h=s.categories,N=s.errorMessage,O=(s.category,s.shipping,s.quantity),j=s.loading,y=s.error,w=s.createdProduct,x=s.redirectToProfile,S=s.formData,k=C(),P=k.jwt,_=k.userData,I=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;l(Object(p.a)(Object(p.a)({},s),{},Object(d.a)({},e,a))),S.set(e,a)}},T=function(){var e=Object(m.a)(i.a.mark((function e(){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(Object(p.a)(Object(p.a)({},s),{},{loading:!0})),e.prev=1,e.next=4,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/").concat(t),method:"GET",headers:{Authorization:"Bearer "+P}});case 4:"success"===(a=e.sent).data.status&&(l(Object(p.a)(Object(p.a)({},s),{},{name:a.data.product.name,description:a.data.product.description,price:a.data.product.price,category:a.data.product.category,shipping:a.data.product.shipping,quantity:a.data.product.quantity,formData:new FormData})),D()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l(Object(p.a)(Object(p.a)({},s),{},{error:!0,errorMessage:e.t0.response.data.message,loading:!1}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/category/all")});case 3:"success"===(t=e.sent).data.status&&l({categories:t.data.category,loading:!1,formData:new FormData}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),l(Object(p.a)(Object(p.a)({},s),{},{error:!0,errorMessage:e.t0.response.data.message,loading:!1}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(m.a)(i.a.mark((function e(a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),l(Object(p.a)(Object(p.a)({},s),{},{loading:!0,error:!1,errorMessage:""})),e.prev=2,e.next=5,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/").concat(t,"/").concat(_._id),method:"PUT",headers:{Authorization:"Bearer "+P},data:S});case 5:"success"===(r=e.sent).data.status&&l(Object(p.a)(Object(p.a)({},s),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:r.data.newProduct.name,formData:null,error:!1,redirectToProfile:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),l(Object(p.a)(Object(p.a)({},s),{},{error:!0,errorMessage:e.t0.response.data.message,loading:!1}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){T()}),[]);return n.a.createElement(b,{title:"Add new Product",description:"Hi ".concat(_.name," ready to add a new Product"),className:"container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-8 offset-md-2"},function(){if(j&&!y)return n.a.createElement("div",{className:"alert alert-success"},n.a.createElement("h2",null,"Loading ..."))}(),n.a.createElement("div",{className:"alert alert-info",style:{display:w?"":"none"}},n.a.createElement("h2",null,"".concat(w," is updated"))),function(){if(y&&!j)return n.a.createElement("div",{className:"alert alert-danger",style:{display:y?"":"none"}},N)}(),n.a.createElement("form",{className:"mb-3",onSubmit:M},n.a.createElement("h4",null,"Post Photo"),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"btn btn-outline-secondary"},n.a.createElement("input",{onChange:I("photo"),type:"file",name:"photo",accept:"image/*"}))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Name"),n.a.createElement("input",{onChange:I("name"),type:"text",className:"form-control",value:u})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Description"),n.a.createElement("textarea",{onChange:I("description"),className:"form-control",value:g})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Price"),n.a.createElement("input",{onChange:I("price"),type:"number",className:"form-control",value:v})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Category"),n.a.createElement("select",{onChange:I("category"),className:"form-control"},n.a.createElement("option",null," please Select"),h&&h.map((function(e,t){return n.a.createElement("option",{key:e._id,value:e._id},e.name)})))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Quantity"),n.a.createElement("input",{onChange:I("quantity"),type:"number",className:"form-control",value:O})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{className:"text-muted"},"Shipping"),n.a.createElement("select",{onChange:I("shipping"),type:"text",className:"form-control"},n.a.createElement("option",null," please Select"),n.a.createElement("option",{value:"0"},"No"),n.a.createElement("option",{value:"1"},"Yes"))),n.a.createElement("button",{className:"btn btn-outline-primary"},"update Product")),function(){if(x&&!y)return n.a.createElement(o.a,{to:"/admin/products"})}())))},R=a(18),$=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),c=a[0],s=a[1],l=function(t){return function(){var a=c.indexOf(t),r=Object(R.a)(c);-1===a?r.push(t):r.splice(a,1),s(r),e.handleFilters(r)}};return e.categories.map((function(e,t){return n.a.createElement("li",{key:e._id,className:"list-unstyled"},n.a.createElement("input",{onChange:l(e._id),value:c.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),n.a.createElement("label",{className:"form-check-label"}," ",e.name))}))},H=[{_id:0,name:"any",array:[]},{_id:1,name:"$0 to $9",array:[0,9]},{_id:2,name:"$10 to $19",array:[10,19]},{_id:3,name:"$20 to 29",array:[20,29]},{_id:4,name:"$30 to $39",array:[30,39]},{_id:5,name:"More than 40",array:[40,99999]}],Y=function(e){var t=Object(r.useState)(0),a=Object(f.a)(t,2),c=(a[0],a[1]),s=function(t){e.handleFilters(t.target.value),c(t.target.value)};return e.prices.map((function(e,t){return n.a.createElement("li",{key:e._id,className:"list-unstyled ml-0"},n.a.createElement("input",{onChange:s,value:"".concat(e._id),name:e.name,type:"radio",className:"ml-0 mr-0"}),n.a.createElement("label",{className:"form-check-label"}," ",e.name))}))},W=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),c=a[0],s=a[1],l=Object(r.useState)({filters:{category:[],price:[]}}),o=Object(f.a)(l,2),u=o[0],d=o[1],g=Object(r.useState)(!1),v=Object(f.a)(g,2),h=v[0],N=v[1],O=Object(r.useState)(!1),j=Object(f.a)(O,2),w=j[0],x=j[1],S=Object(r.useState)(""),k=Object(f.a)(S,2),P=k[0],C=k[1],_=Object(r.useState)(3),I=Object(f.a)(_,2),T=I[0],D=(I[1],Object(r.useState)(0)),M=Object(f.a)(D,2),A=M[0],B=M[1],U=Object(r.useState)(0),J=Object(f.a)(U,2),L=J[0],z=J[1],q=Object(r.useState)([]),F=Object(f.a)(q,2),W=F[0],Q=F[1],V=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/category/all")});case 3:"success"===(t=e.sent).data.status&&s(t.data.category),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),C(e.t0.response.data.message),N(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(m.a)(i.a.mark((function e(t,a,r){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={limit:a,skip:t,filters:r},x(!0),e.prev=2,e.next=5,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/by/search"),method:"POST",data:n});case 5:"success"===(c=e.sent).data.status&&(Q(c.data.result),z(c.data.result.length),x(!1),B(0)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),C(e.t0.response.data.message),N(!0),x(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a,r){return e.apply(this,arguments)}}(),K=function(){var e=Object(m.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={limit:T,skip:t=A+T,filters:u.filters},e.prev=2,e.next=5,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/by/search"),method:"POST",data:a});case 5:"success"===(r=e.sent).data.status&&(Q([].concat(Object(R.a)(W),[r.data.result])),B(t)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),C(e.t0.response.data.message),N(!0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),X=function(e,t){var a=Object(p.a)({},u);if(a.filters[t]=e,"price"===t){var r=function(e){var t=H,a=[];for(var r in t)t[r]._id===parseInt(e)&&(a=t[r].array);return a}(e);a.filters[t]=r}d(a),G(A,T,u.filters)};Object(r.useEffect)((function(){V(),G(A,T,u.filters)}),[]);return n.a.createElement(b,{title:"Shop Page",className:"container-fluid",description:"Filter the products and find what you prefer"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-4"},n.a.createElement("h4",null,"Categories"),n.a.createElement("ul",null,n.a.createElement($,{categories:c,handleFilters:function(e){return X(e,"category")}})),n.a.createElement("h4",null," Price range"),n.a.createElement("ul",null,n.a.createElement(Y,{prices:H,handleFilters:function(e){return X(e,"price")}}))),n.a.createElement("div",{className:"col-8"},n.a.createElement("h2",{className:"mb-4"},"Products"),n.a.createElement("div",{className:"row"},function(){if(!w&&0===L)return n.a.createElement("h2",{className:"alert alert-warning btn-block"},"No result")}(),function(){if(!h&&w)return n.a.createElement("h2",{className:"alert alert-primary"},"...Loading")}(),function(){if(h&&!w)return n.a.createElement("h2",{className:"alert alert-danger"}," ",P)}(),!h&&!w&&W.map((function(e,t){return n.a.createElement("div",{key:e._id,className:"col-md-4 col-sm-12 mb-3"},n.a.createElement(y,{product:e}))}))),n.a.createElement("hr",null),L>0&&L>T&&n.a.createElement("button",{onClick:K,className:"btn btn-warning mb-5 "},"Load More"))))},Q=function(e){var t=Object(r.useState)({}),a=Object(f.a)(t,2),c=a[0],s=a[1],l=Object(r.useState)([]),u=Object(f.a)(l,2),d=u[0],p=u[1],g=Object(r.useState)(!1),v=Object(f.a)(g,2),h=v[0],N=v[1],O=Object(r.useState)(""),j=Object(f.a)(O,2),w=j[0],x=j[1],S=Object(r.useState)(!1),k=Object(f.a)(S,2),P=k[0],C=k[1],_=Object(o.h)(),I=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/").concat(t)});case 4:"success"===(a=e.sent).data.status&&(s(a.data.product),T(a.data.product._id)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),x(e.t0.response.data.message),N(!0),C(!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(m.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/product/related/").concat(t)});case 3:"success"===(a=e.sent).data.status&&(p(a.data.relatedProduct),C(!1)),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),x(e.t0.response.data.message),N(!0),C(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){I(_.productId)}),[_]);return n.a.createElement(b,{title:c&&c.name,description:c&&c.description&&c.description.substring(0,100),className:"container-fluid"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-8"},function(){if(P&&!h)return n.a.createElement("h2",{className:"alert alert-info"},"Loading ....")}(),function(){if(h&&!P)return n.a.createElement("h2",{className:"alert alert-danger"},w)}(),c&&c.description&&n.a.createElement(y,{showViewProductButton:!0,product:c})),n.a.createElement("div",{className:"col-md-4"},n.a.createElement("h4",null,"Related Product"),d&&d.map((function(e,t){return n.a.createElement("div",{className:"mb-3",key:e._id},n.a.createElement(y,{product:e}))})))))},V=a(41),G=a.n(V),K=function(e){var t,a,c=localStorage.getItem("jwt"),s=localStorage.getItem("data"),o=Object(r.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),u=Object(f.a)(o,2),d=u[0],b=u[1],g=function(){return e.products.reduce((function(e,t){return e+t.count*t.price}),0)},v=function(){var e=Object(m.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/braintree/getToken/").concat(s._id),headers:{Authorization:"Bearer "+c}});case 3:"success"===(t=e.sent).data.status&&b({clientToken:t.data.response.clientToken}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),b(Object(p.a)(Object(p.a)({},d),{},{error:e.t0.response.data.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(m.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/order/create/").concat(s._id),method:"POST",headers:{Authorization:"Bearer "+c},data:{order:t}});case 3:e.sent.data.status,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var t=Object(m.a)(i.a.mark((function t(a){var r,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E()({url:"".concat("http://127.0.0.1:8000/api/v1","/braintree/payment/").concat(s._id),method:"POST",data:a,headers:{Authorization:"Bearer "+c}});case 3:"success"===(r=t.sent).data.status&&(n={products:e.products,transaction_id:r.data.result.transaction.id,amount:r.data.result.transaction.amount,address:d.address},h(n),b(Object(p.a)(Object(p.a)({},d),{},{success:r.data.result.success})),l=function(){},"undefined"!==typeof window&&(localStorage.removeItem("cart"),l()),b(Object(p.a)(Object(p.a)({},d),{},{loading:!1,success:!0}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),b(Object(p.a)(Object(p.a)({},d),{},{loading:!1}));case 10:case"end":return t.stop()}var l}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),O=function(){b(Object(p.a)(Object(p.a)({},d),{},{loading:!0}));d.instance.requestPaymentMethod().then((function(t){var a={paymentMethodNonce:t.nonce,amount:g(e.products)};N(a)})).catch((function(e){b(Object(p.a)(Object(p.a)({},d),{},{error:e.message}))}))},j=function(e){b(Object(p.a)(Object(p.a)({},d),{},{address:e.target.value}))};return Object(r.useEffect)((function(){v()}),[]),n.a.createElement("div",null,n.a.createElement("h2",null,"Total:$",g()),d.loading&&n.a.createElement("h2",null,"Loading..."),(a=d.error,n.a.createElement("div",{className:"alert alert-danger",style:{display:a?"":"none"}},a)),(t=d.success,n.a.createElement("div",{className:"alert alert-success",style:{display:t?"":"none"}},"Thanks ! your payment was successful")),c?n.a.createElement("div",null,n.a.createElement("div",{onBlur:function(){return b(Object(p.a)(Object(p.a)({},d),{},{error:""}))}},null!==d.clientToken&&e.products.length>0?n.a.createElement("div",null,n.a.createElement("div",{className:"form-group mb-3"},n.a.createElement("label",{className:"text-muted"},"Delivery address:"),n.a.createElement("textarea",{onChange:j,className:"form-control",value:d.address,placeholder:"Type your delivery address here ..."})),n.a.createElement(G.a,{options:{authorization:d.clientToken},onInstance:function(e){return d.instance=e}}),n.a.createElement("button",{className:"btn btn-success btn-block",onClick:O},"Pay")):null)):n.a.createElement(l.b,{to:"/login"},n.a.createElement("button",{className:"btn btn-primary"},"login to checkout")))},X=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),c=a[0],s=a[1];Object(r.useEffect)((function(){s("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[]);return n.a.createElement(b,{title:"Shopping Cart",className:"container-fluid",description:"Manage your cart items.add remove checkout or continue shopping"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-6"},c.length>0?function(e){return n.a.createElement("div",null,n.a.createElement("h2",null," your cart has","".concat(e.length)," items "),n.a.createElement("hr",null),e.map((function(e,t){return n.a.createElement(y,{key:e._id,product:e,cartUpdate:!0,showAddCartButton:!0,showRemoveProduct:!0})})))}(c):n.a.createElement("h2",null,"Your cart is empty .",n.a.createElement("br",null),n.a.createElement(l.b,{to:"/shop"},"Continue Shopping"))),n.a.createElement("div",{className:"col-6"},n.a.createElement("h2",{className:"mb-4"},"Your cart Summary"),n.a.createElement("hr",null),n.a.createElement(K,{products:c}))))},Z=function(){return n.a.createElement("div",null,n.a.createElement(l.a,null,n.a.createElement(I,null),n.a.createElement(o.d,null,n.a.createElement(o.b,{path:"/",exact:!0},n.a.createElement(k,null))," ",n.a.createElement(o.b,{path:"/cart",exact:!0},n.a.createElement(X,null))," ",n.a.createElement(o.b,{path:"/shop",exact:!0},n.a.createElement(W,null))," ",n.a.createElement(o.b,{path:"/signup",exact:!0},n.a.createElement(v,null))," ",n.a.createElement(o.b,{path:"/login",exact:!0},n.a.createElement(h,null))," ",n.a.createElement(o.b,{path:"/product/:productId",exact:!0},n.a.createElement(Q,null)),n.a.createElement(A,{path:"/user/dashboard",exact:!0,component:T})," ",n.a.createElement(A,{path:"/profile/:userId",exact:!0,component:z})," ",n.a.createElement(B,{path:"/admin/dashboard",exact:!0,component:D})," ",n.a.createElement(B,{path:"/create/Category",exact:!0,component:U})," ",n.a.createElement(B,{path:"/admin/orders",exact:!0,component:L})," ",n.a.createElement(B,{path:"/admin/product/update/:productId",exact:!0,component:F})," ",n.a.createElement(B,{path:"/admin/products",exact:!0,component:q})," ",n.a.createElement(B,{path:"/create/Product",exact:!0,component:J}),n.a.createElement(o.a,{to:"/"}))," ")," ")};var ee=function(){return n.a.createElement(Z,null)};s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(ee,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.4861c820.chunk.js.map