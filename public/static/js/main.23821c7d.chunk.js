(this["webpackJsonpecommerce-frontend"]=this["webpackJsonpecommerce-frontend"]||[]).push([[0],{26:function(e,t,a){},42:function(e,t,a){e.exports=a(83)},47:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(22),s=a.n(n),o=(a(47),a(6)),l=a(7),m=a(2),u=a.n(m),i=a(4),p=a(9),d=a(1),f=a(3),g=(a(26),function(e){return c.a.createElement("div",null,c.a.createElement("div",{className:"jumbotron"},c.a.createElement("h2",null,e.title),c.a.createElement("p",{className:"lead"},e.description)),c.a.createElement("div",{className:e.className},e.children))}),b=a(5),h=a.n(b),E=function(e){var t=Object(r.useState)({name:"",email:"",password:"",error:!1,errorMessage:"",success:!1,loading:!1}),a=Object(f.a)(t,2),n=a[0],s=a[1],l=function(e){return function(t){s(Object(d.a)(Object(d.a)({},n),{},Object(p.a)({error:!1},e,t.target.value)))}},m=n.name,b=n.email,E=n.password,v=n.success,N=n.error,O=n.errorMessage,j=n.loading,y=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s(Object(d.a)(Object(d.a)({},n),{},{error:!1,errorMessage:"",success:!1,loading:!0})),e.prev=2,e.next=5,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/auth/signup"),method:"POST",data:{name:m,email:b,password:E}});case 5:"success"===e.sent.data.status&&s(Object(d.a)(Object(d.a)({},n),{},{name:"",email:"",password:"",error:!1,errorMessage:"",success:!0,loading:!1})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s(Object(d.a)(Object(d.a)({},n),{},{error:!0,errorMessage:e.t0.response.data.message,success:!1,loading:!1}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(g,{title:"Signup ",className:"container col-md-8 offset-md-2",description:"signup to Node React E-commerce App"},function(){if(j&&!N&&!v)return c.a.createElement("div",{className:"alert alert-info"},"Waiting ...")}(),c.a.createElement("div",{className:"alert alert-success",style:{display:v?"":"none"}},"new Account was created plus try to ",c.a.createElement(o.b,{to:"/login"},"login")),c.a.createElement("div",{className:"alert alert-danger",style:{display:N?"":"none"}},O),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:l("name"),type:"text",className:"form-control",value:m})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{onChange:l("email"),type:"email",className:"form-control",value:b})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Password"),c.a.createElement("input",{onChange:l("password"),type:"password",className:"form-control",value:E})),c.a.createElement("button",{onClick:y,className:"btn btn-primary"},"Signup")))},v=function(e){var t=Object(r.useState)({email:"",password:"",error:!1,loading:!1,redirectToReferrer:!1,errorMessage:"",success:!1}),a=Object(f.a)(t,2),n=a[0],s=a[1],o=n.email,m=n.password,b=n.loading,E=n.error,v=n.errorMessage,N=n.success,O=n.redirectToReferrer,j=function(e){return function(t){s(Object(d.a)(Object(d.a)({},n),{},Object(p.a)({error:!1},e,t.target.value)))}},y=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s(Object(d.a)(Object(d.a)({},n),{},{error:!1,errorMessage:"",loading:!0,redirectToReferrer:!1,success:!1})),e.prev=2,e.next=5,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/auth/login"),method:"POST",data:{email:o,password:m}});case 5:"succes"===(a=e.sent).data.status&&(void 0!==typeof window&&(localStorage.setItem("jwt",a.data.token),localStorage.setItem("data",JSON.stringify(a.data.user))),s(Object(d.a)(Object(d.a)({},n),{},{error:!1,errorMessage:!1,success:!0,loading:!1,redirectToReferrer:!0}))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s(Object(d.a)(Object(d.a)({},n),{},{error:!0,errorMessage:e.t0.response.data.message,success:!1,loading:!1,redirectToReferrer:!1}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(g,{title:"Login ",className:"container col-md-8 offset-md-2",description:"signup to Node React E-commerce App"},b&&c.a.createElement("div",{className:"alert alert-info"},c.a.createElement("h2",null,"loading ...")),c.a.createElement("div",{className:"alert alert-danger",style:{display:E?"":"none"}},v),c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{onChange:j("email"),type:"email",className:"form-control",value:o})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Password"),c.a.createElement("input",{onChange:j("password"),type:"password",className:"form-control",value:m})),c.a.createElement("button",{onClick:y,className:"btn btn-primary"},"Login")),function(){var e=JSON.parse(localStorage.getItem("data"));return N&&O?"admin"===e.role?c.a.createElement(l.a,{to:"/admin/dashboard"}):c.a.createElement(l.a,{to:"/user/dashboard"}):e?c.a.createElement(l.a,{to:"/"}):void 0}())},N=function(e){return c.a.createElement("div",{className:"product-img",style:{height:"200px",width:"200px"}},c.a.createElement("img",{src:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/photo/").concat(e.item._id),alt:e.item.name,className:"mb-3 text-center",style:{objectFit:"cover",maxWidth:"2OOpx",maxHeight:"200px"}}))},O=a(39),j=a.n(O),y=function(e){var t=Object(r.useState)(!1),a=Object(f.a)(t,2),n=a[0],s=a[1],m=Object(r.useState)(e.product.count),u=Object(f.a)(m,2),i=u[0],p=u[1],g=function(e){return function(t){p(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.map((function(r,c){r._id===e&&(a[c].count=t)})),localStorage.setItem("cart",JSON.stringify(a)))}(e,t.target.value)}},b=function(){!function(e,t){var a=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(a=JSON.parse(localStorage.getItem("cart"))),a.push(Object(d.a)(Object(d.a)({},e),{},{count:1})),a=Array.from(new Set(a.map((function(e){return e._id})))).map((function(e){return a.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(a)),t())}(e.product,(function(){s(!0)}))};return c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header name text-center"},e.product.name),c.a.createElement("div",{className:"card-body"},function(e){if(e)return c.a.createElement(l.a,{to:"/cart"})}(n),c.a.createElement(N,{item:e.product}),c.a.createElement("p",{className:"lead mt-2 text-center font-weight-bold"},e.product.description.substring(0,100)),c.a.createElement("p",{className:"bg-success text-warning"},"Price : ",e.product.price," $"," "),c.a.createElement("p",{className:"bg-success text-warning"},"Category : ",e.product.category&&e.product.category.name),c.a.createElement("p",{className:"bg-success text-warning font-italic"},"Added ",j()(e.product.createdAt).fromNow()),e.product.quantity>0?c.a.createElement("span",{className:"badge badge-primary badge-pill"},"In Stock"):c.a.createElement("span",{className:"badge badge-primary badge-pill"}," out of stock"),c.a.createElement("br",null),c.a.createElement(o.b,{to:"/product/".concat(e.product._id)},!e.showViewProductButton&&c.a.createElement("button",{className:"btn btn-outline-primary mt-2 mb-2 mr-2"},"View Product")),!e.showAddCartButton&&c.a.createElement("button",{onClick:b,className:"btn btn-outline-success mt-2 mb-2"},"Add to card"),e.cartUpdate&&c.a.createElement("div",{className:"input-group mb-3"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("span",{className:"input-group-text"},"Adjust Quantity")),c.a.createElement("input",{type:"number",onChange:g(e.product._id),className:"form-control",value:i})),function(t){return t&&c.a.createElement("button",{onClick:function(){return function(e){var t=[];return"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(a,r){a._id===e&&t.splice(r,1)})),localStorage.setItem("cart",JSON.stringify(t))),t}(e.product._id)},className:"btn btn-outline-danger mt-2 mb-2"},"remove product")}(e.showRemoveProduct)))},w=a(40),x=a.n(w),k=function(e){var t=Object(r.useState)({categories:[],category:"",search:"",results:[],searched:!1}),a=Object(f.a)(t,2),n=a[0],s=a[1],o=n.categories,l=n.category,m=n.search,g=n.results,b=n.searched,E=Object(r.useState)(""),v=Object(f.a)(E,2),N=(v[0],v[1]),O=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/category/all")});case 3:"success"===(t=e.sent).data.status&&s(Object(d.a)(Object(d.a)({},n),{},{categories:t.data.category})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),N(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),j=function(e){return function(t){var a;s(Object(d.a)(Object(d.a)({},n),{},(a={},Object(p.a)(a,e,t.target.value),Object(p.a)(a,"searched",!1),a)))}},w=function(e){e.preventDefault(),k()},k=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m||!l){e.next=11;break}return t=x.a.stringify({search:m,category:l}),e.prev=2,e.next=5,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/search?").concat(t)});case 5:"success"===(a=e.sent).data.status&&s(Object(d.a)(Object(d.a)({},n),{},{results:a.data.list,searched:!0})),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),S=function(e,t){return e&&t.length>0?"Found ".concat(t.length," product"):e&&t.length<1?" No Product Found":void 0};return Object(r.useEffect)((function(){O()}),[]),c.a.createElement("div",null,c.a.createElement("div",{className:"container"},c.a.createElement("form",{onSubmit:w},c.a.createElement("span",{className:"input-group-text"},c.a.createElement("div",{className:"input-group input-group-lg"},c.a.createElement("div",{className:"input-group-prepent"},c.a.createElement("select",{className:"btn mr-2 ",onChange:j("category")},c.a.createElement("option",{value:"All"},"ALL"),o.map((function(e,t){return c.a.createElement("option",{key:e._id,value:e._id},e.name)})))),c.a.createElement("input",{type:"search",className:"form-control",onChange:j("search"),placeholder:"Search by name"})),c.a.createElement("div",{className:"btn input-group-append",style:{border:"none"}},c.a.createElement("button",{className:"input-group-text"},"Search"))))),c.a.createElement("div",{className:"container-fluid mb-3"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return c.a.createElement("div",null,c.a.createElement("h2",{className:"mt-4 mb-4"},S(b,e)),c.a.createElement("div",{className:"row"},e.map((function(e,t){return c.a.createElement(y,{key:e._id,product:e})}))))}(g)))},S=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),n=a[0],s=a[1],o=Object(r.useState)([]),l=Object(f.a)(o,2),m=l[0],p=l[1],d=Object(r.useState)(!1),b=Object(f.a)(d,2),E=b[0],v=b[1],N=Object(r.useState)(""),O=Object(f.a)(N,2),j=O[0],w=O[1],x=Object(r.useState)(!1),S=Object(f.a)(x,2),P=S[0],C=S[1],_=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/list?sortBy=sold&order=desc&limit=100")});case 3:"success"===(t=e.sent).data.status&&(s(t.data.listProduct),C(!1)),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),v(!0),w(e.t0.response.data.message),C(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/list?sortBy=createdAt&order=desc&limit=100")});case 4:"success"===(t=e.sent).data.status&&p(t.data.listProduct),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),v(!0),w(e.t0.response.data.message),C(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){I(),_()}),[]),c.a.createElement(g,{title:"Home Page",className:"container-fluid",description:"Web Technologies E-commerce App"},c.a.createElement(k,null),function(){if(P&&!E)return c.a.createElement("h2",{className:"alert alert-primary"},"Loading ...")}(),function(){if(!P&&E)return c.a.createElement("h2",{className:"alert alert-danger"},j)}(),!P&&!E&&c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",{className:"mb-4"},"Best Sellers"),c.a.createElement("div",{className:"row"},m.map((function(e,t){return c.a.createElement("div",{key:e._id,className:"col-md-4 col-sm-12 mb-3"},c.a.createElement(y,{product:e}))}))),c.a.createElement("h2",{className:"mb-4"},"Best Arrival"),c.a.createElement("div",{className:"row"},n.map((function(e,t){return c.a.createElement("div",{key:e._id,className:"col-md-4 col-sm-12 mb-3"},c.a.createElement(y,{product:e}))})))))},P=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/auth/logout")});case 3:"success"===e.sent.data.status&&(localStorage.setItem("jwt",null),localStorage.clear(),t()),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){return"undefined"!==typeof window&&(!(!localStorage.getItem("jwt")||!localStorage.getItem("data"))&&{jwt:localStorage.getItem("jwt"),userData:JSON.parse(localStorage.getItem("data"))})},_=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},I=Object(l.i)((function(e){var t=localStorage.getItem("jwt"),a=JSON.parse(localStorage.getItem("data")),r=Object(l.g)();return c.a.createElement("div",null,c.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary "},c.a.createElement("ul",{className:"navbar-nav  mr-auto"},c.a.createElement("li",{className:"nav-item mr-4 "},c.a.createElement(o.b,{className:"nav-link",style:_(e.history,"/"),to:"/"},"Home"," ")," ")," ",c.a.createElement("li",{className:"nav-item mr-4"},c.a.createElement(o.b,{className:"nav-link",style:_(e.history,"/shop"),to:"/shop"},"Shop"," ")," ")," ",c.a.createElement("li",{className:"nav-item mr-4"},c.a.createElement(o.b,{className:"nav-link",style:_(e.history,"/cart"),to:"/cart"},"Cart"," ",c.a.createElement("sup",null,c.a.createElement("small",{className:"cart-badge"}," ","undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0," ")," ")," ")," ")," ",t&&"user"===a.role&&c.a.createElement("li",{className:"nav-item mr-4"},c.a.createElement(o.b,{className:"nav-link",style:_(r,"/dashboard"),to:"/user/dashboard"},"Dashboard"," ")," ")," ",t&&"admin"===a.role&&c.a.createElement("li",{className:"nav-item mr-4"},c.a.createElement(o.b,{className:"nav-link",style:_(r,"/dashboard"),to:"/admin/dashboard"},"Dashboard"," ")," ")," ")," ",c.a.createElement("ul",{className:"navbar-nav  ml-auto"},!t&&c.a.createElement("li",{className:"nav-item mr-4"},c.a.createElement(o.b,{className:"nav-link",style:_(e.history,"/signup"),to:"/signup"},"Signup"," ")," "),!t&&c.a.createElement("li",{className:"nav-item "},c.a.createElement(o.b,{className:"nav-link",style:_(e.history,"/login"),to:"/login"},"Login"," ")," ")," ",t&&c.a.createElement("li",{className:"nav-item "},c.a.createElement(o.b,{className:"nav-link",style:{cursor:"pointer",color:"#ffffff"},to:"/login",onClick:function(){return P((function(){r.push("/")}))}},"Logout"," ")," "))," "))})),T=function(e){var t=JSON.parse(localStorage.getItem("data")),a=t._id,n=t.name,s=t.email,l=t.role,m=localStorage.getItem("jwt"),p=Object(r.useState)([]),d=Object(f.a)(p,2),b=d[0],E=d[1],v=Object(r.useState)(!1),N=Object(f.a)(v,2),O=N[0],j=N[1],y=Object(r.useState)(""),w=Object(f.a)(y,2),x=w[0],k=w[1],S=Object(r.useState)(!1),P=Object(f.a)(S,2),C=P[0],_=P[1],I=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!0),e.prev=1,e.next=4,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/user/orders/by/").concat(a),headers:{Authorization:"Bearer "+m}});case 4:"success"===(t=e.sent).data.status&&(E(t.data.listOfOrders),_(!1),k(""),j(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),j(!0),k(e.t0.response.data.message),_(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){I()}),[]);return c.a.createElement(g,{title:"User Dashbord",description:"Hi ".concat(n),className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"},c.a.createElement("div",{className:"card"},c.a.createElement("h4",{className:"card-header"},"User Links"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement(o.b,{className:"nav-link",to:"/cart"},"My Cart")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(o.b,{className:"nav-link",to:"/profile/".concat(a)},"Update Profile"))))),c.a.createElement("div",{className:"col-9"},function(){if(O&&!C)return c.a.createElement("h2",{className:"alert alert-danger"},x)}(),c.a.createElement("div",{className:"card mb-5"},c.a.createElement("h3",{className:"card-header"},"User Information"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},n),c.a.createElement("li",{className:"list-group-item"},s),c.a.createElement("li",{className:"list-group-item"},l))),c.a.createElement("div",{className:"card mb-5"},c.a.createElement("h3",{className:"card-header"},"purchase history"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},function(){if(!C&&!O&&0===b.length)return c.a.createElement("h2",{className:"alert alert-info"},"you have no orders")}(),b&&b.length>0&&b.map((function(e,t){return c.a.createElement("div",{key:e._id},e.products.map((function(e,t){return c.a.createElement("div",{key:e._id},c.a.createElement("h6",{className:"text-info"},"product Name : ",e.name),c.a.createElement("h6",{className:"text-info"},"product price : ",e.price," $"),c.a.createElement("h6",{className:"text-info"},"count : ",e.count))})),c.a.createElement("h6",{className:"text-info"},"amount : ",e.amount," $ "),c.a.createElement("h6",{className:"text-info"},"created At : ",e.createdAt," "),c.a.createElement("hr",null))}))," ",c.a.createElement("hr",null)))))))},D=function(e){var t=JSON.parse(localStorage.getItem("data")),a=(t._id,t.name),r=t.email,n=t.role;return c.a.createElement(g,{title:"User Dashbord",description:"Hi ".concat(a),className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-3"},c.a.createElement("div",{className:"card"},c.a.createElement("h4",{className:"card-header"},"Admin Links"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},c.a.createElement(o.b,{className:"nav-link",to:"/create/category"},"Create Category")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(o.b,{className:"nav-link",to:"/create/product"},"Create Product")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(o.b,{className:"nav-link",to:"/admin/orders"},"list of orders")),c.a.createElement("li",{className:"list-group-item"},c.a.createElement(o.b,{className:"nav-link",to:"/admin/products"},"Manage Products"))))),c.a.createElement("div",{className:"col-9"},c.a.createElement("div",{className:"card mb-5"},c.a.createElement("h3",{className:"card-header"},"User Information"),c.a.createElement("ul",{className:"list-group"},c.a.createElement("li",{className:"list-group-item"},a),c.a.createElement("li",{className:"list-group-item"},r),c.a.createElement("li",{className:"list-group-item"},"admin"===n?"admin":"Registered User"))))))},M=a(19),A=function(e){var t=e.component,a=Object(M.a)(e,["component"]);return c.a.createElement(l.b,Object.assign({},a,{render:function(e){return C()?c.a.createElement(t,e):c.a.createElement(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},B=function(e){var t=e.component,a=Object(M.a)(e,["component"]),r=JSON.parse(localStorage.getItem("data")).role,n=localStorage.getItem("jwt");return c.a.createElement(l.b,Object.assign({},a,{render:function(e){return n&&"admin"===r?c.a.createElement(t,e):c.a.createElement(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},U=function(e){var t=Object(r.useState)(""),a=Object(f.a)(t,2),n=a[0],s=a[1],o=Object(r.useState)(!1),l=Object(f.a)(o,2),m=l[0],p=l[1],d=Object(r.useState)(""),b=Object(f.a)(d,2),E=b[0],v=b[1],N=Object(r.useState)(!1),O=Object(f.a)(N,2),j=O[0],y=O[1],w=Object(r.useState)(!1),x=Object(f.a)(w,2),k=x[0],S=x[1],P=C(),_=P.jwt,I=P.userData,T=function(e){p(!1),v(""),s(e.target.value)},D=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),p(!1),y(!1),e.prev=3,S(!0),e.next=7,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/category/create/").concat(I.userId),method:"POST",data:{name:n},headers:{Authorization:"Bearer "+_}});case 7:"success"===e.sent.data.status&&(p(!1),y(!0),S(!1)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(3),p(!0),v(e.t0.response.data.message),S(!1);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(g,{title:"Add new category",description:"Hi ".concat(I.name," ready to add a new category"),className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-8 offset-md-2"},function(){if(k&&!m&&!j)return c.a.createElement("h2",{className:"bg-info d-block mb-4 p-2"},"Waiting ....")}(),function(){if(j)return c.a.createElement("h3",{className:"bg-success d-block mb-4 p-2"},n," is created");setTimeout((function(){y(!1)}),5e3)}(),function(){if(m)return c.a.createElement("h3",{className:"bg-danger d-block mb-4 p-2"},E," ")}(),c.a.createElement("form",{onSubmit:D},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{type:"text",className:"form-control",onChange:T,value:n,autoFocus:!0,required:!0})),c.a.createElement("button",{className:"btn btn-outline-primary "},"Create Category")))))},J=function(e){var t=Object(r.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,errorMessage:"",cretedProduct:"",redirectTo:!1,formData:null}),a=Object(f.a)(t,2),n=a[0],s=a[1],o=n.name,m=n.description,b=n.price,E=n.categories,v=(n.category,n.shipping,n.quantity),N=n.errorMessage,O=n.loading,j=n.error,y=n.createdProduct,w=n.redirectTo,x=n.formData,k=C(),S=k.jwt,P=k.userData,_=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;s(Object(d.a)(Object(d.a)({},n),{},Object(p.a)({},e,a))),x.set(e,a)}},I=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/category/all")});case 3:"success"===(t=e.sent).data.status&&s(Object(d.a)(Object(d.a)({},n),{},{categories:t.data.category,formData:new FormData})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s(Object(d.a)(Object(d.a)({},n),{},{error:!1,errorMessage:e.t0.response.data.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s(Object(d.a)(Object(d.a)({},n),{},Object(p.a)({loading:!0,error:!1,errorMessage:""},"loading",!0))),e.prev=2,e.next=5,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/create/").concat(P._id),method:"POST",headers:{Authorization:"Bearer "+S},data:x});case 5:"success"===(a=e.sent).data.status&&s(Object(d.a)(Object(d.a)({},n),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:a.data.newProduct.name,formData:null,error:!1,errorMessage:"",redirectTo:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),s(Object(d.a)(Object(d.a)({},n),{},{loading:!1,errorMessage:e.t0.response.data.message,error:!0}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){I()}),[]);return c.a.createElement(g,{title:"Add new Product",description:"Hi ".concat(P.name," ready to add a new Product"),className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-8 offset-md-2"},O&&c.a.createElement("div",{className:"alert alert-info"},c.a.createElement("h2",null,"Loading ...")),c.a.createElement("div",{className:"alert alert-success",style:{display:y?"":"none"}},c.a.createElement("h2",null,"".concat(y," is created"))),c.a.createElement("div",{className:"alert alert-danger",style:{display:j?"":"none"}},N),c.a.createElement("form",{className:"mb-3",onSubmit:T},c.a.createElement("h4",null,"Post Photo"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"btn btn-outline-secondary"},c.a.createElement("input",{onChange:_("photo"),type:"file",name:"photo",accept:"image/*"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:_("name"),type:"text",className:"form-control",value:o})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Description"),c.a.createElement("textarea",{onChange:_("description"),className:"form-control",value:m})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Price"),c.a.createElement("input",{onChange:_("price"),type:"number",className:"form-control",value:b})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Category"),c.a.createElement("select",{onChange:_("category"),className:"form-control"},c.a.createElement("option",null," please Select"),E&&E.map((function(e,t){return c.a.createElement("option",{key:e._id,value:e._id},e.name)})))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Quantity"),c.a.createElement("input",{onChange:_("quantity"),type:"number",className:"form-control",value:v})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Shipping"),c.a.createElement("select",{onChange:_("shipping"),type:"text",className:"form-control"},c.a.createElement("option",null," please Select"),c.a.createElement("option",{value:!1},"No"),c.a.createElement("option",{value:!0},"Yes"))),c.a.createElement("button",{className:"btn btn-outline-primary"},"Create Product")),function(){if(w&&!O&&!j)return c.a.createElement(l.a,{to:"/admin/products"})}())))},L=function(e){var t=localStorage.getItem("data"),a=localStorage.getItem("jwt"),n=Object(r.useState)([]),s=Object(f.a)(n,2),o=s[0],l=s[1],m=Object(r.useState)([]),p=Object(f.a)(m,2),d=p[0],b=p[1],E=function(){var e=Object(i.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/order/list/").concat(t._id),headers:{authorization:"Bearer "+a}});case 3:"success"===(r=e.sent).data.status&&l(r.data.list),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/order/status-values/").concat(t._id),headers:{authorization:"Bearer "+a}});case 3:"success"===(r=e.sent).data.status&&b(r.data.result),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){E(),v()}),[]);var N=function(e,t){return c.a.createElement("div",{className:"input-group mb-2 mr-sm-2"},c.a.createElement("div",{className:"input-group-prepend"},c.a.createElement("div",{className:"input-group-text"},e),c.a.createElement("input",{type:"text",value:t,className:"form-control",readOnly:!0})))},O=function(){var e=Object(i.a)(u.a.mark((function e(r,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/order/update-order/").concat(c,"/").concat(t._id),method:"PUT",headers:{authorization:"Bearer "+a},data:{status:r.target.value}});case 3:"success"===e.sent.data.status&&E(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}();return c.a.createElement(g,{title:"Orders",descripition:"you can manage all orders here"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-8 offset-md-2"},o.length>0?c.a.createElement("h1",{className:"text-danger display-2"},"TotalOrders:",o.length):c.a.createElement("h1",{className:"text-danger"}," no Orders"),o.map((function(e,t){return c.a.createElement("div",{className:"mt-5",key:e._id,style:{borderBottom:"5px solid indigo"}},c.a.createElement("h2",{className:"mb-5"},c.a.createElement("span",{className:"bg-primary"},"Order ID :",e._id)),c.a.createElement("ul",{className:"list-group mb-2"},c.a.createElement("li",{className:"list-group-item"},function(e){return c.a.createElement("div",{className:"fom-group"},c.a.createElement("h3",{className:"mark mb-4"},"Status :",e.status),c.a.createElement("select",{className:"form-control",onChange:function(t){return O(t,e._id)}},c.a.createElement("option",null,"Update Status"),d.map((function(e,t){return c.a.createElement("option",{key:e,value:e},e)}))))}(e)),c.a.createElement("li",{className:"list-group-item"},"Transaction ID : "),c.a.createElement("li",{className:"list-group-item"},"Amount :",e.amount),c.a.createElement("li",{className:"list-group-item"},"Orderd By :",e.user.name),c.a.createElement("li",{className:"list-group-item"},"Order On :",e.createdAt),c.a.createElement("li",{className:"list-group-item"},"Delivery address: ",e.address)),c.a.createElement("h3",{className:"mt-4 mb-4 font-italic"},"Total products in the order : ",e.products.length),e.products.map((function(e,t){return c.a.createElement("div",{className:"mb-4",key:e._id,style:{padding:"20px",border:"1px solid indigo"}},N("Product name",e.name),N("Product price",e.price),N("Product total",e.count),N("Product ID",e._id))})))})))))},z=function(e){var t=Object(r.useState)({name:"",email:"",currentPassword:"",newPassword:"",errorMessage:"",error:!1,loading:!1,success:!1}),a=Object(f.a)(t,2),n=a[0],s=a[1],o=n.name,m=n.currentPassword,b=n.email,E=n.error,v=n.success,N=n.errorMessage,O=n.loading,j=n.newPassword,y=localStorage.getItem("jwt"),w=Object(l.h)(),x=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(d.a)(Object(d.a)({},n),{},{loading:!0})),e.prev=1,e.next=4,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/user/").concat(w.userId),headers:{Authorization:"Bearer "+y}});case 4:"success"===(t=e.sent).data.status&&s(Object(d.a)(Object(d.a)({},n),{},{name:t.data.user.name,email:t.data.user.email,loading:!1})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s(Object(d.a)(Object(d.a)({},n),{},{errorMessage:e.t0.response.data.message,error:!0,loading:!1,success:!1}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(i.a)(u.a.mark((function e(t,a,r){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(Object(d.a)(Object(d.a)({},n),{},{loading:!0,success:!1,error:!1,errorMessage:""})),e.prev=1,e.next=4,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/user/update/").concat(w.userId),method:"PUT",headers:{Authorization:"Bearer "+y},data:{name:t,currentPassword:m,newPassword:j,email:a}});case 4:"success"===(c=e.sent).data.status&&(s(Object(d.a)(Object(d.a)({},n),{},{name:c.data.updatedUser.name,email:c.data.updatedUser.email,success:!0,loading:!1})),localStorage.setItem("data",JSON.stringify(c.data.updatedUser))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s(Object(d.a)(Object(d.a)({},n),{},{errorMessage:e.t0.response.data.message,loading:!1,error:!0,success:!1}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a,r){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){x()}),[]);var S=function(e){return function(t){var a;s(Object(d.a)(Object(d.a)({},n),{},(a={},Object(p.a)(a,e,t.target.value),Object(p.a)(a,"error",""),a)))}},P=function(e){e.preventDefault(),k(o,b,m,j)};return c.a.createElement(g,{title:"Profile",description:"Update Your Profile",className:"container-fluid"},c.a.createElement("h2",null,"Profile "),function(){if(E&&!O&&!v)return c.a.createElement("div",{className:"alert alert-danger"},N)}(),function(){if(!E&&!O&&v)return c.a.createElement("div",{className:"alert alert-success"},"your profile has been updated successfully")}(),function(){if(O&&!E&&!v)return c.a.createElement("div",{className:"alert alert-info"},"Loading ...")}(),function(e,t,a){return c.a.createElement("form",null,c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{type:"text",onChange:S("name"),className:"form-control",value:e})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Email"),c.a.createElement("input",{type:"text",onChange:S("email"),className:"form-control",value:t})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Current password"),c.a.createElement("input",{type:"password",onChange:S("currentPassword"),className:"form-control",value:m})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"New password"),c.a.createElement("input",{type:"password",onChange:S("newPassword"),className:"form-control",value:j})),c.a.createElement("button",{onClick:P,className:"btn btn-primary btn-block mb-4"},"Update"))}(o,b,0),function(e){if(!0===e)return c.a.createElement(l.a,{to:"/cart"})}(v))},q=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),n=a[0],s=a[1],l=Object(r.useState)(!1),m=Object(f.a)(l,2),p=m[0],d=m[1],b=Object(r.useState)(""),E=Object(f.a)(b,2),v=E[0],N=E[1],O=Object(r.useState)(!1),j=Object(f.a)(O,2),y=j[0],w=j[1],x=Object(r.useState)(!1),k=Object(f.a)(x,2),S=k[0],P=k[1],C=Object(r.useState)(!1),_=Object(f.a)(C,2),I=(_[0],_[1]),T=localStorage.getItem("jwt"),D=JSON.parse(localStorage.getItem("data")),M=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/list"),method:"GET"});case 4:"success"===(t=e.sent).data.status&&(s(t.data.listProduct),w(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),d(!0),w(!1),N(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.prev=1,e.next=4,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/").concat(t,"/").concat(D._id),method:"DELETE",headers:{Authorization:"Bearer "+T}});case 4:"success"===e.sent.data.status&&(P(!0),I(!0),w(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),w(!1),d(!0),N(e.t0.response.data.message);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){M()}),[S]);return c.a.createElement(g,{title:"User Dashbord",description:"Manage your products",className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12"},c.a.createElement("h2",{className:"text-center"},"Total : ",n.length," product"),c.a.createElement("hr",null),c.a.createElement("ul",{className:"list-group"},function(){if(!p&&y)return c.a.createElement("h2",{className:"alert alert-info"},"Loading....")}(),function(){if(p&&!y)return c.a.createElement("h2",{className:"alert alert-danger"},v)}(),void(!p&&S&&setTimeout((function(){return c.a.createElement("h2",{className:"alert alert-success"},"deleted successfully")}),4e3)),!p&&!y&&n.map((function(e,t){return c.a.createElement("li",{key:e._id,className:"list-group-item d-flex justify-content-between align-items-center"},c.a.createElement("div",{className:"row",style:{width:"100%"}},c.a.createElement("div",{className:"col-4"},c.a.createElement("strong",null,e.name)),c.a.createElement("div",{className:"col-4  mr-auto"},c.a.createElement(o.b,{to:"/admin/product/update/".concat(e._id)},c.a.createElement("span",{className:"badge badge-warning badge-pill ml-2 mr-2 p-2 d-inline-block"},"Update")," ")),c.a.createElement("div",{className:"col-4 mr-auto"},c.a.createElement("span",{onClick:function(){return A(e._id)},className:"badge badge-danger badge-pill ml-2 mr-2 p-2 d-inline-block",style:{cursor:"pointer"}},"delete"," "))))}))))))},F=function(e){var t=Object(l.h)().productId,a=Object(r.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,errorMessage:"",cretedProduct:"",redirectToProfile:!1,formData:null}),n=Object(f.a)(a,2),s=n[0],o=n[1],m=s.name,b=s.description,E=s.price,v=s.categories,N=s.errorMessage,O=(s.category,s.shipping,s.quantity),j=s.loading,y=s.error,w=s.createdProduct,x=s.redirectToProfile,k=s.formData,S=C(),P=S.jwt,_=S.userData,I=function(e){return function(t){var a="photo"===e?t.target.files[0]:t.target.value;o(Object(d.a)(Object(d.a)({},s),{},Object(p.a)({},e,a))),k.set(e,a)}},T=function(){var e=Object(i.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(Object(d.a)(Object(d.a)({},s),{},{loading:!0})),e.prev=1,e.next=4,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/").concat(t),method:"GET",headers:{Authorization:"Bearer "+P}});case 4:"success"===(a=e.sent).data.status&&(o(Object(d.a)(Object(d.a)({},s),{},{name:a.data.product.name,description:a.data.product.description,price:a.data.product.price,category:a.data.product.category,shipping:a.data.product.shipping,quantity:a.data.product.quantity,formData:new FormData})),D()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o(Object(d.a)(Object(d.a)({},s),{},{error:!0,errorMessage:e.t0.response.data.message,loading:!1}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/category/all")});case 3:"success"===(t=e.sent).data.status&&o({categories:t.data.category,loading:!1,formData:new FormData}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(Object(d.a)(Object(d.a)({},s),{},{error:!0,errorMessage:e.t0.response.data.message,loading:!1}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(u.a.mark((function e(a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),o(Object(d.a)(Object(d.a)({},s),{},{loading:!0,error:!1,errorMessage:""})),e.prev=2,e.next=5,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/").concat(t,"/").concat(_._id),method:"PUT",headers:{Authorization:"Bearer "+P},data:k});case 5:"success"===(r=e.sent).data.status&&o(Object(d.a)(Object(d.a)({},s),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,createdProduct:r.data.newProduct.name,formData:null,error:!1,redirectToProfile:!0})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o(Object(d.a)(Object(d.a)({},s),{},{error:!0,errorMessage:e.t0.response.data.message,loading:!1}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){T()}),[]);return c.a.createElement(g,{title:"Add new Product",description:"Hi ".concat(_.name," ready to add a new Product"),className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-8 offset-md-2"},function(){if(j&&!y)return c.a.createElement("div",{className:"alert alert-success"},c.a.createElement("h2",null,"Loading ..."))}(),c.a.createElement("div",{className:"alert alert-info",style:{display:w?"":"none"}},c.a.createElement("h2",null,"".concat(w," is updated"))),function(){if(y&&!j)return c.a.createElement("div",{className:"alert alert-danger",style:{display:y?"":"none"}},N)}(),c.a.createElement("form",{className:"mb-3",onSubmit:M},c.a.createElement("h4",null,"Post Photo"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"btn btn-outline-secondary"},c.a.createElement("input",{onChange:I("photo"),type:"file",name:"photo",accept:"image/*"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Name"),c.a.createElement("input",{onChange:I("name"),type:"text",className:"form-control",value:m})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Description"),c.a.createElement("textarea",{onChange:I("description"),className:"form-control",value:b})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Price"),c.a.createElement("input",{onChange:I("price"),type:"number",className:"form-control",value:E})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Category"),c.a.createElement("select",{onChange:I("category"),className:"form-control"},c.a.createElement("option",null," please Select"),v&&v.map((function(e,t){return c.a.createElement("option",{key:e._id,value:e._id},e.name)})))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Quantity"),c.a.createElement("input",{onChange:I("quantity"),type:"number",className:"form-control",value:O})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"text-muted"},"Shipping"),c.a.createElement("select",{onChange:I("shipping"),type:"text",className:"form-control"},c.a.createElement("option",null," please Select"),c.a.createElement("option",{value:"0"},"No"),c.a.createElement("option",{value:"1"},"Yes"))),c.a.createElement("button",{className:"btn btn-outline-primary"},"update Product")),function(){if(x&&!y)return c.a.createElement(l.a,{to:"/admin/products"})}())))},R=a(18),$=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),n=a[0],s=a[1],o=function(t){return function(){var a=n.indexOf(t),r=Object(R.a)(n);-1===a?r.push(t):r.splice(a,1),s(r),e.handleFilters(r)}};return e.categories.map((function(e,t){return c.a.createElement("li",{key:e._id,className:"list-unstyled"},c.a.createElement("input",{onChange:o(e._id),value:n.indexOf(-1===e._id),type:"checkbox",className:"form-check-input"}),c.a.createElement("label",{className:"form-check-label"}," ",e.name))}))},H=[{_id:0,name:"any",array:[]},{_id:1,name:"$0 to $9",array:[0,9]},{_id:2,name:"$10 to $19",array:[10,19]},{_id:3,name:"$20 to 29",array:[20,29]},{_id:4,name:"$30 to $39",array:[30,39]},{_id:5,name:"More than 40",array:[40,99999]}],Y=function(e){var t=Object(r.useState)(0),a=Object(f.a)(t,2),n=(a[0],a[1]),s=function(t){e.handleFilters(t.target.value),n(t.target.value)};return e.prices.map((function(e,t){return c.a.createElement("li",{key:e._id,className:"list-unstyled ml-0"},c.a.createElement("input",{onChange:s,value:"".concat(e._id),name:e.name,type:"radio",className:"ml-0 mr-0"}),c.a.createElement("label",{className:"form-check-label"}," ",e.name))}))},W=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),n=a[0],s=a[1],o=Object(r.useState)({filters:{category:[],price:[]}}),l=Object(f.a)(o,2),m=l[0],p=l[1],b=Object(r.useState)(!1),E=Object(f.a)(b,2),v=E[0],N=E[1],O=Object(r.useState)(!1),j=Object(f.a)(O,2),w=j[0],x=j[1],k=Object(r.useState)(""),S=Object(f.a)(k,2),P=S[0],C=S[1],_=Object(r.useState)(3),I=Object(f.a)(_,2),T=I[0],D=(I[1],Object(r.useState)(0)),M=Object(f.a)(D,2),A=M[0],B=M[1],U=Object(r.useState)(0),J=Object(f.a)(U,2),L=J[0],z=J[1],q=Object(r.useState)([]),F=Object(f.a)(q,2),W=F[0],Q=F[1],V=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/category/all")});case 3:"success"===(t=e.sent).data.status&&s(t.data.category),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),C(e.t0.response.data.message),N(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(i.a)(u.a.mark((function e(t,a,r){var c,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={limit:a,skip:t,filters:r},x(!0),e.prev=2,e.next=5,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/by/search"),method:"POST",data:c});case 5:"success"===(n=e.sent).data.status&&(Q(n.data.result),z(n.data.result.length),x(!1),B(0)),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(2),C(e.t0.response.data.message),N(!0),x(!1);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a,r){return e.apply(this,arguments)}}(),K=function(){var e=Object(i.a)(u.a.mark((function e(){var t,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={limit:T,skip:t=A+T,filters:m.filters},e.prev=2,e.next=5,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/by/search"),method:"POST",data:a});case 5:"success"===(r=e.sent).data.status&&(Q([].concat(Object(R.a)(W),[r.data.result])),B(t)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),C(e.t0.response.data.message),N(!0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),X=function(e,t){var a=Object(d.a)({},m);if(a.filters[t]=e,"price"===t){var r=function(e){var t=H,a=[];for(var r in t)t[r]._id===parseInt(e)&&(a=t[r].array);return a}(e);a.filters[t]=r}p(a),G(A,T,m.filters)};Object(r.useEffect)((function(){V(),G(A,T,m.filters)}),[]);return c.a.createElement(g,{title:"Shop Page",className:"container-fluid",description:"Filter the products and find what you prefer"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-4"},c.a.createElement("h4",null,"Categories"),c.a.createElement("ul",null,c.a.createElement($,{categories:n,handleFilters:function(e){return X(e,"category")}})),c.a.createElement("h4",null," Price range"),c.a.createElement("ul",null,c.a.createElement(Y,{prices:H,handleFilters:function(e){return X(e,"price")}}))),c.a.createElement("div",{className:"col-8"},c.a.createElement("h2",{className:"mb-4"},"Products"),c.a.createElement("div",{className:"row"},function(){if(!w&&0===L)return c.a.createElement("h2",{className:"alert alert-warning btn-block"},"No result")}(),function(){if(!v&&w)return c.a.createElement("h2",{className:"alert alert-primary"},"...Loading")}(),function(){if(v&&!w)return c.a.createElement("h2",{className:"alert alert-danger"}," ",P)}(),!v&&!w&&W.map((function(e,t){return c.a.createElement("div",{key:e._id,className:"col-md-4 col-sm-12 mb-3"},c.a.createElement(y,{product:e}))}))),c.a.createElement("hr",null),L>0&&L>T&&c.a.createElement("button",{onClick:K,className:"btn btn-warning mb-5 "},"Load More"))))},Q=function(e){var t=Object(r.useState)({}),a=Object(f.a)(t,2),n=a[0],s=a[1],o=Object(r.useState)([]),m=Object(f.a)(o,2),p=m[0],d=m[1],b=Object(r.useState)(!1),E=Object(f.a)(b,2),v=E[0],N=E[1],O=Object(r.useState)(""),j=Object(f.a)(O,2),w=j[0],x=j[1],k=Object(r.useState)(!1),S=Object(f.a)(k,2),P=S[0],C=S[1],_=Object(l.h)(),I=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/").concat(t)});case 4:"success"===(a=e.sent).data.status&&(s(a.data.product),T(a.data.product._id)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),x(e.t0.response.data.message),N(!0),C(!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/product/related/").concat(t)});case 3:"success"===(a=e.sent).data.status&&(d(a.data.relatedProduct),C(!1)),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),x(e.t0.response.data.message),N(!0),C(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){I(_.productId)}),[_]);return c.a.createElement(g,{title:n&&n.name,description:n&&n.description&&n.description.substring(0,100),className:"container-fluid"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md-8"},function(){if(P&&!v)return c.a.createElement("h2",{className:"alert alert-info"},"Loading ....")}(),function(){if(v&&!P)return c.a.createElement("h2",{className:"alert alert-danger"},w)}(),n&&n.description&&c.a.createElement(y,{showViewProductButton:!0,product:n})),c.a.createElement("div",{className:"col-md-4"},c.a.createElement("h4",null,"Related Product"),p&&p.map((function(e,t){return c.a.createElement("div",{className:"mb-3",key:e._id},c.a.createElement(y,{product:e}))})))))},V=a(41),G=a.n(V),K=function(e){var t,a,n=localStorage.getItem("jwt"),s=localStorage.getItem("data"),l=Object(r.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),m=Object(f.a)(l,2),p=m[0],g=m[1],b=function(){return e.products.reduce((function(e,t){return e+t.count*t.price}),0)},E=function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/braintree/getToken/").concat(s._id),headers:{Authorization:"Bearer "+n}});case 3:"success"===(t=e.sent).data.status&&g({clientToken:t.data.response.clientToken}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),g(Object(d.a)(Object(d.a)({},p),{},{error:e.t0.response.data.message}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/order/create/").concat(s._id),method:"POST",headers:{Authorization:"Bearer "+n},data:{order:t}});case 3:e.sent.data.status,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var t=Object(i.a)(u.a.mark((function t(a){var r,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h()({url:"".concat("https://e-commerce-technologies-app.herokuapp.com/api/v1","/braintree/payment/").concat(s._id),method:"POST",data:a,headers:{Authorization:"Bearer "+n}});case 3:"success"===(r=t.sent).data.status&&(c={products:e.products,transaction_id:r.data.result.transaction.id,amount:r.data.result.transaction.amount,address:p.address},v(c),g(Object(d.a)(Object(d.a)({},p),{},{success:r.data.result.success})),o=function(){},"undefined"!==typeof window&&(localStorage.removeItem("cart"),o()),g(Object(d.a)(Object(d.a)({},p),{},{loading:!1,success:!0}))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),g(Object(d.a)(Object(d.a)({},p),{},{loading:!1}));case 10:case"end":return t.stop()}var o}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),O=function(){g(Object(d.a)(Object(d.a)({},p),{},{loading:!0}));p.instance.requestPaymentMethod().then((function(t){var a={paymentMethodNonce:t.nonce,amount:b(e.products)};N(a)})).catch((function(e){g(Object(d.a)(Object(d.a)({},p),{},{error:e.message}))}))},j=function(e){g(Object(d.a)(Object(d.a)({},p),{},{address:e.target.value}))};return Object(r.useEffect)((function(){E()}),[]),c.a.createElement("div",null,c.a.createElement("h2",null,"Total:$",b()),p.loading&&c.a.createElement("h2",null,"Loading..."),(a=p.error,c.a.createElement("div",{className:"alert alert-danger",style:{display:a?"":"none"}},a)),(t=p.success,c.a.createElement("div",{className:"alert alert-success",style:{display:t?"":"none"}},"Thanks ! your payment was successful")),n?c.a.createElement("div",null,c.a.createElement("div",{onBlur:function(){return g(Object(d.a)(Object(d.a)({},p),{},{error:""}))}},null!==p.clientToken&&e.products.length>0?c.a.createElement("div",null,c.a.createElement("div",{className:"form-group mb-3"},c.a.createElement("label",{className:"text-muted"},"Delivery address:"),c.a.createElement("textarea",{onChange:j,className:"form-control",value:p.address,placeholder:"Type your delivery address here ..."})),c.a.createElement(G.a,{options:{authorization:p.clientToken},onInstance:function(e){return p.instance=e}}),c.a.createElement("button",{className:"btn btn-success btn-block",onClick:O},"Pay")):null)):c.a.createElement(o.b,{to:"/login"},c.a.createElement("button",{className:"btn btn-primary"},"login to checkout")))},X=function(e){var t=Object(r.useState)([]),a=Object(f.a)(t,2),n=a[0],s=a[1];Object(r.useEffect)((function(){s("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[]);return c.a.createElement(g,{title:"Shopping Cart",className:"container-fluid",description:"Manage your cart items.add remove checkout or continue shopping"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-6"},n.length>0?function(e){return c.a.createElement("div",null,c.a.createElement("h2",null," your cart has","".concat(e.length)," items "),c.a.createElement("hr",null),e.map((function(e,t){return c.a.createElement(y,{key:e._id,product:e,cartUpdate:!0,showAddCartButton:!0,showRemoveProduct:!0})})))}(n):c.a.createElement("h2",null,"Your cart is empty .",c.a.createElement("br",null),c.a.createElement(o.b,{to:"/shop"},"Continue Shopping"))),c.a.createElement("div",{className:"col-6"},c.a.createElement("h2",{className:"mb-4"},"Your cart Summary"),c.a.createElement("hr",null),c.a.createElement(K,{products:n}))))},Z=function(){return c.a.createElement("div",null,c.a.createElement(o.a,null,c.a.createElement(I,null),c.a.createElement(l.d,null,c.a.createElement(l.b,{path:"/",exact:!0},c.a.createElement(S,null))," ",c.a.createElement(l.b,{path:"/cart",exact:!0},c.a.createElement(X,null))," ",c.a.createElement(l.b,{path:"/shop",exact:!0},c.a.createElement(W,null))," ",c.a.createElement(l.b,{path:"/signup",exact:!0},c.a.createElement(E,null))," ",c.a.createElement(l.b,{path:"/login",exact:!0},c.a.createElement(v,null))," ",c.a.createElement(l.b,{path:"/product/:productId",exact:!0},c.a.createElement(Q,null)),c.a.createElement(A,{path:"/user/dashboard",exact:!0,component:T})," ",c.a.createElement(A,{path:"/profile/:userId",exact:!0,component:z})," ",c.a.createElement(B,{path:"/admin/dashboard",exact:!0,component:D})," ",c.a.createElement(B,{path:"/create/Category",exact:!0,component:U})," ",c.a.createElement(B,{path:"/admin/orders",exact:!0,component:L})," ",c.a.createElement(B,{path:"/admin/product/update/:productId",exact:!0,component:F})," ",c.a.createElement(B,{path:"/admin/products",exact:!0,component:q})," ",c.a.createElement(B,{path:"/create/Product",exact:!0,component:J}),c.a.createElement(l.a,{to:"/"}))," ")," ")};var ee=function(){return c.a.createElement(Z,null)};s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(ee,null)),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.23821c7d.chunk.js.map